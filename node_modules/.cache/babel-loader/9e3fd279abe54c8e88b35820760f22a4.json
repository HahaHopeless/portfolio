{"ast":null,"code":"function e(t) {\n  return (e = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (e) {\n    return typeof e;\n  } : function (e) {\n    return e && \"function\" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? \"symbol\" : typeof e;\n  })(t);\n}\n\nfunction t(e, t) {\n  if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n}\n\nfunction n(e, t) {\n  for (var n = 0; n < t.length; n++) {\n    var i = t[n];\n    i.enumerable = i.enumerable || !1, i.configurable = !0, \"value\" in i && (i.writable = !0), Object.defineProperty(e, i.key, i);\n  }\n}\n\nfunction i(e, t) {\n  if (null == e) return {};\n\n  var n,\n      i,\n      r = function (e, t) {\n    if (null == e) return {};\n    var n,\n        i,\n        r = {},\n        o = Object.keys(e);\n\n    for (i = 0; i < o.length; i++) n = o[i], t.indexOf(n) >= 0 || (r[n] = e[n]);\n\n    return r;\n  }(e, t);\n\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n\n    for (i = 0; i < o.length; i++) n = o[i], t.indexOf(n) >= 0 || Object.prototype.propertyIsEnumerable.call(e, n) && (r[n] = e[n]);\n  }\n\n  return r;\n}\n\nfunction r(e, t) {\n  var n = t.get(e);\n  if (!n) throw new TypeError(\"attempted to get private field on non-instance\");\n  return n.get ? n.get.call(e) : n.value;\n}\n\nvar o = {\n  player: \"lottie-player\"\n},\n    a = function () {\n  function a() {\n    var n = this,\n        u = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : o,\n        c = u.actions,\n        f = u.container,\n        d = u.mode,\n        m = u.player,\n        v = i(u, [\"actions\", \"container\", \"mode\", \"player\"]);\n\n    if (t(this, a), s.set(this, {\n      writable: !0,\n      value: function (e) {\n        r(n, y).call(n, e.clientX, e.clientY);\n      }\n    }), l.set(this, {\n      writable: !0,\n      value: function () {\n        r(n, y).call(n, -1, -1);\n      }\n    }), y.set(this, {\n      writable: !0,\n      value: function (e, t) {\n        if (-1 !== e && -1 !== t) {\n          var i = n.getContainerCursorPosition(e, t);\n          e = i.x, t = i.y;\n        }\n\n        var r = n.actions.find(function (n) {\n          var i = n.position;\n          return Array.isArray(i.x) && Array.isArray(i.y) ? e >= i.x[0] && e <= i.x[1] && t >= i.y[0] && t <= i.y[1] : !Number.isNaN(i.x) && !Number.isNaN(i.y) && e === i.x && t === i.y;\n        });\n        if (r) if (\"seek\" === r.type) {\n          var o = (e - r.position.x[0]) / (r.position.x[1] - r.position.x[0]),\n              a = (t - r.position.y[0]) / (r.position.y[1] - r.position.y[0]);\n          n.player.playSegments(r.frames, !0), r.position.y[0] < 0 && r.position.y[1] > 1 ? n.player.goToAndStop(Math.floor(o * n.player.totalFrames), !0) : n.player.goToAndStop(Math.ceil((o + a) / 2 * n.player.totalFrames), !0);\n        } else \"loop\" === r.type ? n.player.playSegments(r.frames, !0) : \"play\" === r.type ? (!0 === n.player.isPaused && n.player.resetSegments(), n.player.playSegments(r.frames)) : \"stop\" === r.type && n.player.goToAndStop(r.frames[0], !0);\n      }\n    }), p.set(this, {\n      writable: !0,\n      value: function () {\n        var e = n.getContainerVisibility(),\n            t = n.actions.find(function (t) {\n          var n = t.visibility;\n          return e >= n[0] && e <= n[1];\n        });\n        if (t) if (\"seek\" === t.type) {\n          var i = t.frames[0],\n              r = 2 == t.frames.length ? t.frames[1] : n.player.totalFrames - 1;\n          null !== n.assignedSegment && (n.player.resetSegments(!0), n.assignedSegment = null), n.player.goToAndStop(i + Math.round((e - t.visibility[0]) / (t.visibility[1] - t.visibility[0]) * (r - i)), !0);\n        } else \"loop\" === t.type ? (n.player.loop = !0, (null === n.assignedSegment || n.assignedSegment !== t.frames || !0 === n.player.isPaused) && (n.player.playSegments(t.frames, !0), n.assignedSegment = t.frames)) : \"play\" === t.type ? n.scrolledAndPlayed || (n.scrolledAndPlayed = !0, n.player.resetSegments(!0), n.player.play()) : \"stop\" === t.type && n.player.goToAndStop(t.frames[0], !0);\n      }\n    }), \"object\" !== e(m) || \"AnimationItem\" !== m.constructor.name) {\n      if (\"string\" == typeof m) {\n        var g = document.querySelector(m);\n        g && \"LOTTIE-PLAYER\" === g.nodeName && (m = g.getLottie());\n      } else m instanceof HTMLElement && \"LOTTIE-PLAYER\" === m.nodeName && (m = m.getLottie());\n\n      if (!m) throw new Error(\"\".concat(\"[lottieInteractivity]:\", \" Specified player is invalid.\"), m);\n    }\n\n    \"string\" == typeof f && (f = document.querySelector(f)), f || (f = m.wrapper), this.player = m, this.container = f, this.mode = d, this.actions = c, this.options = v, this.assignedSegment = null, this.scrolledAndPlayed = !1;\n  }\n\n  var u, c, f;\n  return u = a, (c = [{\n    key: \"getContainerVisibility\",\n    value: function () {\n      var e = this.container.getBoundingClientRect(),\n          t = e.top,\n          n = e.height;\n      return (window.innerHeight - t) / (window.innerHeight + n);\n    }\n  }, {\n    key: \"getContainerCursorPosition\",\n    value: function (e, t) {\n      var n = this.container.getBoundingClientRect(),\n          i = n.top;\n      return {\n        x: (e - n.left) / n.width,\n        y: (t - i) / n.height\n      };\n    }\n  }, {\n    key: \"start\",\n    value: function () {\n      var e = this;\n      \"scroll\" === this.mode && this.player.addEventListener(\"DOMLoaded\", function () {\n        e.player.stop(), window.addEventListener(\"scroll\", r(e, p));\n      }), \"cursor\" === this.mode && this.player.addEventListener(\"DOMLoaded\", function () {\n        e.player.loop = !0, e.player.stop(), e.container.addEventListener(\"mousemove\", r(e, s)), e.container.addEventListener(\"mouseout\", r(e, l));\n      });\n    }\n  }, {\n    key: \"stop\",\n    value: function () {\n      \"scroll\" === this.mode && window.removeEventListener(\"scroll\", r(this, p)), \"cursor\" === this.mode && (this.container.addEventListener(\"mousemove\", r(this, s)), this.container.addEventListener(\"mouseout\", r(this, l)));\n    }\n  }, {\n    key: \"animate\",\n    value: function (e) {\n      var t = e.timing,\n          n = e.draw,\n          i = e.duration,\n          r = performance.now();\n      requestAnimationFrame(function e(o) {\n        var a = (o - r) / i;\n        a > 1 && (a = 1);\n        var s = t(a);\n        n(s), a < 1 && requestAnimationFrame(e);\n      });\n    }\n  }]) && n(u.prototype, c), f && n(u, f), a;\n}(),\n    s = new WeakMap(),\n    l = new WeakMap(),\n    y = new WeakMap(),\n    p = new WeakMap(),\n    u = function (e) {\n  var t = new a(e);\n  return t.start(), t;\n};\n\nexport default u;\nexport { a as LottieInteractivity, u as create };","map":{"version":3,"sources":["../src/main.js"],"names":["DEFAULT_OPTIONS","player","LottieInteractivity","actions","container","mode","options","_typeof","constructor","name","elem","document","querySelector","nodeName","getLottie","HTMLElement","Error","wrapper","assignedSegment","scrolledAndPlayed","top","height","this","getBoundingClientRect","window","innerHeight","cursorX","cursorY","left","width","x","y","Parentscope","addEventListener","stop","loop","removeEventListener","_this","e","clientX","clientY","timing","draw","duration","start","performance","now","requestAnimationFrame","animate","time","timeFraction","progress","pos","getContainerCursorPosition","action","find","position","Array","isArray","Number","isNaN","type","xPercent","yPercent","playSegments","frames","goToAndStop","Math","floor","totalFrames","ceil","isPaused","resetSegments","currentPercent","getContainerVisibility","visibility","end","length","round","play","create","instance"],"mappings":"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","sourcesContent":["const DEFAULT_OPTIONS = {\n  player: 'lottie-player',\n};\nconst LOTTIE_PLAYER_NODE = 'LOTTIE-PLAYER';\nconst ERROR_PREFIX = '[lottieInteractivity]:';\n\n/**\n * LottieFiles interactivity for Lottie\n */\nexport class LottieInteractivity {\n  constructor({ actions, container, mode, player, ...options } = DEFAULT_OPTIONS) {\n    // Resolve lottie instance specified in player option\n    if (!(typeof player === 'object' && player.constructor.name === 'AnimationItem')) {\n      if (typeof player === 'string') {\n        const elem = document.querySelector(player);\n\n        if (elem && elem.nodeName === LOTTIE_PLAYER_NODE) {\n          player = elem.getLottie();\n        }\n      } else if (player instanceof HTMLElement && player.nodeName === LOTTIE_PLAYER_NODE) {\n        player = player.getLottie();\n      }\n\n      // Throw error no player instance has been successfully resolved\n      if (!player) {\n        throw new Error(`${ERROR_PREFIX} Specified player is invalid.`, player);\n      }\n    }\n\n    // Get the configured container element.\n    if (typeof container === 'string') {\n      container = document.querySelector(container);\n    }\n\n    // Use player wrapper as fallback if container couldn't be resolved.\n    if (!container) {\n      container = player.wrapper;\n    }\n\n    this.player = player;\n    this.container = container;\n    this.mode = mode;\n    this.actions = actions;\n    this.options = options;\n    this.assignedSegment = null;\n    this.scrolledAndPlayed = false;\n  }\n\n  getContainerVisibility() {\n    // Get the bounding box for the lottie player or container\n    const { top, height } = this.container.getBoundingClientRect();\n\n    // Calculate current view percentage\n    const current = window.innerHeight - top;\n    const max = window.innerHeight + height;\n    return current / max;\n  }\n\n  getContainerCursorPosition(cursorX, cursorY) {\n    const { top, left, width, height } = this.container.getBoundingClientRect();\n\n    const x = (cursorX - left) / width;\n    const y = (cursorY - top) / height;\n\n    return { x, y };\n  }\n\n  start() {\n    const Parentscope = this;\n    // Configure player for start\n    if (this.mode === 'scroll') {\n      this.player.addEventListener('DOMLoaded', function () {\n        Parentscope.player.stop();\n        window.addEventListener('scroll', Parentscope.#scrollHandler);\n      });\n    }\n\n    if (this.mode === 'cursor') {\n      this.player.addEventListener('DOMLoaded', function () {\n        Parentscope.player.loop = true;\n        Parentscope.player.stop();\n        Parentscope.container.addEventListener('mousemove', Parentscope.#mousemoveHandler);\n        Parentscope.container.addEventListener('mouseout', Parentscope.#mouseoutHandler);\n      });\n    }\n  }\n\n  stop() {\n    if (this.mode === 'scroll') {\n      window.removeEventListener('scroll', this.#scrollHandler);\n    }\n\n    if (this.mode === 'cursor') {\n      this.container.addEventListener('mousemove', this.#mousemoveHandler);\n      this.container.addEventListener('mouseout', this.#mouseoutHandler);\n    }\n  }\n\n  #mousemoveHandler = e => {\n    this.#cursorHandler(e.clientX, e.clientY);\n  };\n\n  #mouseoutHandler = () => {\n    this.#cursorHandler(-1, -1);\n  };\n\n  animate({ timing, draw, duration }) {\n    let start = performance.now();\n\n    requestAnimationFrame(function animate(time) {\n      // timeFraction goes from 0 to 1\n      let timeFraction = (time - start) / duration;\n      if (timeFraction > 1) timeFraction = 1;\n\n      // calculate the current animation state\n      let progress = timing(timeFraction);\n\n      draw(progress); // draw it\n\n      if (timeFraction < 1) {\n        requestAnimationFrame(animate);\n      }\n    });\n  }\n\n  #cursorHandler = (x, y) => {\n    // Resolve cursor position if cursor is inside container\n    if (x !== -1 && y !== -1) {\n      // Get container cursor position\n      const pos = this.getContainerCursorPosition(x, y);\n\n      // Use the resolved position\n      x = pos.x;\n      y = pos.y;\n    }\n\n    // Find the first action that satisfies the current position conditions\n    const action = this.actions.find(({ position }) => {\n      if (Array.isArray(position.x) && Array.isArray(position.y)) {\n        return x >= position.x[0] && x <= position.x[1] && y >= position.y[0] && y <= position.y[1];\n      } else if (!Number.isNaN(position.x) && !Number.isNaN(position.y)) {\n        return x === position.x && y === position.y;\n      }\n\n      return false;\n    });\n\n    // Skip if no matching action was found!\n    if (!action) {\n      return;\n    }\n\n    // Process action types:\n    if (action.type === 'seek') {\n      // Seek: Go to a frame based on player scroll position action\n      const xPercent = (x - action.position.x[0]) / (action.position.x[1] - action.position.x[0]);\n      const yPercent = (y - action.position.y[0]) / (action.position.y[1] - action.position.y[0]);\n\n      this.player.playSegments(action.frames, true);\n\n      if (action.position.y[0] < 0 && action.position.y[1] > 1) {\n        this.player.goToAndStop(Math.floor(xPercent * this.player.totalFrames), true);\n      } else {\n        this.player.goToAndStop(Math.ceil(((xPercent + yPercent) / 2) * this.player.totalFrames), true);\n      }\n    } else if (action.type === 'loop') {\n      this.player.playSegments(action.frames, true);\n    } else if (action.type === 'play') {\n      // Play: Reset segments and continue playing full animation from current position\n      if (this.player.isPaused === true) {\n        this.player.resetSegments();\n      }\n      this.player.playSegments(action.frames);\n    } else if (action.type === 'stop') {\n      // Stop: Stop playback\n      this.player.goToAndStop(action.frames[0], true);\n    }\n  };\n\n  #scrollHandler = () => {\n    // Get container visibility percentage\n\n    const currentPercent = this.getContainerVisibility();\n\n    // Find the first action that satisfies the current position conditions\n    const action = this.actions.find(\n      ({ visibility }) => currentPercent >= visibility[0] && currentPercent <= visibility[1],\n    );\n\n    // Skip if no matching action was found!\n    if (!action) {\n      return;\n    }\n\n    // Process action types:\n    if (action.type === 'seek') {\n      // Seek: Go to a frame based on player scroll position action\n      const start = action.frames[0];\n      const end = action.frames.length == 2 ? action.frames[1] : (this.player.totalFrames - 1);\n\n      // Use global frame reference for frames within the seek section.\n      // Without this, if you follow a seek with a loop and then scroll back up,\n      // it will treat frame numbers as relative to the loop.\n      if (this.assignedSegment !== null) {\n        this.player.resetSegments(true);\n        this.assignedSegment = null;\n      }\n\n      this.player.goToAndStop(\n        start + Math.round(\n          ((currentPercent - action.visibility[0]) / (action.visibility[1] - action.visibility[0])) *\n            (end - start)\n        ),\n        true,\n      );\n    } else if (action.type === 'loop') {\n      this.player.loop = true;\n      // Loop: Loop a given frames\n      if (this.assignedSegment === null) {\n        // if not playing any segments currently. play those segments and save to state\n        this.player.playSegments(action.frames, true);\n        this.assignedSegment = action.frames;\n      } else {\n        // if playing any segments currently.\n        //check if segments in state are equal to the frames selected by action\n        if (this.assignedSegment !== action.frames) {\n          // if they are not equal. new segments are to be loaded\n          this.player.playSegments(action.frames, true);\n          this.assignedSegment = action.frames;\n        } else {\n          // if they are equal the play method must be called only if lottie is paused\n          if (this.player.isPaused === true) {\n            this.player.playSegments(action.frames, true);\n            this.assignedSegment = action.frames;\n          }\n        }\n      }\n    } else if (action.type === 'play') {\n      // Play: Reset segments and continue playing full animation from current position\n      if (!this.scrolledAndPlayed) {\n        this.scrolledAndPlayed = true;\n        this.player.resetSegments(true);\n        this.player.play();\n      }\n    } else if (action.type === 'stop') {\n      // Stop: Stop playback\n      this.player.goToAndStop(action.frames[0], true);\n    }\n  };\n}\n\nexport const create = options => {\n  const instance = new LottieInteractivity(options);\n  instance.start();\n\n  return instance;\n};\n\nexport default create;\n"]},"metadata":{},"sourceType":"module"}